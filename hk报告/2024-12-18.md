---
title: 2024-12-18
author: Dadajia
created: 2024-12-18 18:36
last_modified: 2024-12-18 18:36
---

## 日报
**时间**：2024-12-18 **汇报人**：陈安舒
### 今日工作
1. V5.5.117 H5H9平台运动类维护大版本项目- \[DR-014] 增加雨刷自检配置修复
### 今日总结&问题
今天在处理一个**型检**项目时出现了一个问题，导致项目进度因为我一人的原因没有推进，从本该昨天解决打包提交托到了今晚，甚至明天早上还未必能行。

首先，我先介绍一下项目背景和需求以及遇到的问题

#### 1. 项目背景：
- **型检项目**：首先这是一个型检项目。什么是型检项目呢？就是类似去卖房子，房地产商会先制作出模型给顾客看，这里的模型就是所谓的型检。因为只是型检，所以很多地方都不需要特别严谨甚至可以直接写死。例如像语言包或者根据设备能力/功能判断给出的实际字段都可以直接写死。
- **app项目**：在我们的web项目中，它其实分为app项目和上层项目，所谓的上层项目就是拥有所有的功能代码的部分，而app项目可以简单理解为一个模块的抽离，虽然他也是在上层项目中拉出来的，但是在打包的流程中不像正常打包。
#### 2. 项目需求：
需求很简单，就是将**智能交通模块（一个app模块）**的其中**机占非检测（i18t('xxxx')通过语言包映射获取）**修改成**速度检测**和**安全带检测**（分别出两个程序包）
#### 3. 项目问题：
1. 问题一：
在开始情况下我不清楚这是app模块，于是我直接修改了语言包里的字段映射，在本地运行调试时确实成功了，但是打包过后其实并没有效果。原因在于，这是一个app项目，打包仅打包对应的app项目，随后再将打包好的app作为一个组件包再打包整个web项目，而我在修改的语言包其实是属于上层项目，在打包app的过程中并没有起效果（我不能直接修改上层项目）。
  - 解决方案：    

     1. 直接在app项目中使用 `i18t('xxx')` 的地方全部修改成 **速度检测/安全带检测**
     （我今晚使用的方法就是这样的，但是有一点不好，因为内容需要替换的地方比较多容易漏掉）
     2. 照常修改语言包的映射，但是将上层项目软件重新打包。（不太推荐，虽然是型检单独拉出的分支改上层也没事，但是还是不推荐）
     3. 在对应app模块的语言包新加一个字段，然后将app项目中的字段修改成新的字段。每个app模块其实都有一个自己模块的语言包，在打包自己模块的过程中自己的语言包还是会打包的（之前的映射是在 `common.json` 中的，属于上层模块，它是会被app模块的语言包覆盖的；但其实工作量和第一种一样，还是要找到所有地方全部替换成新字段）

2. 问题二：
打包流程经常错误。实际的流程应该是找到配置表中对应模块的配置表（内含web对应模块和其他功能模块），然后选择web模块，然后先打包web模块，随后将web模块放到顶层配置表中的web_camera(顶层web项目)包中在本地运行查看是否ok，随后确认无误后再对应模块配置表中选择对应的web模块打包。由于我要出两个配置包，那么实际上要出两个web模块包，再将两个web模块包出两个对应模块的包（实际上最好有两个顶层配置表，但是我只有一个所以需要在一个配置表中出两个对应模块的包）